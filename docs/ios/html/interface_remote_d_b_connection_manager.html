<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Medical Cyborgs: RemoteDBConnectionManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Medical Cyborgs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_remote_d_b_connection_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RemoteDBConnectionManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for RemoteDBConnectionManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_remote_d_b_connection_manager.png" usemap="#RemoteDBConnectionManager_map" alt=""/>
  <map id="RemoteDBConnectionManager_map" name="RemoteDBConnectionManager_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a744cbe8cedf02655ce5a2311957059cb"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_remote_d_b_connection_manager.html#a744cbe8cedf02655ce5a2311957059cb">initWithDatabase:</a></td></tr>
<tr class="separator:a744cbe8cedf02655ce5a2311957059cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a517a86ad693e383d664972123808b9fc"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_remote_d_b_connection_manager.html#a517a86ad693e383d664972123808b9fc">pushDataToRemoteServer</a></td></tr>
<tr class="separator:a517a86ad693e383d664972123808b9fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7263ee167de6993f3c68d74f34d3b9e"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_remote_d_b_connection_manager.html#aa7263ee167de6993f3c68d74f34d3b9e">sendRowToServer</a></td></tr>
<tr class="separator:aa7263ee167de6993f3c68d74f34d3b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87140c7af270366183486e2f02dc6f5d"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_remote_d_b_connection_manager.html#a87140c7af270366183486e2f02dc6f5d">removeCurrentRowInLocalDB</a></td></tr>
<tr class="separator:a87140c7af270366183486e2f02dc6f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56943f27947c97c9c0d88bf3f89a73f6"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_remote_d_b_connection_manager.html#a56943f27947c97c9c0d88bf3f89a73f6">URLEncodedString:</a></td></tr>
<tr class="separator:a56943f27947c97c9c0d88bf3f89a73f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:aea31c73a0a3e36095f04688a9b51b594"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea31c73a0a3e36095f04688a9b51b594"></a>
<a class="el" href="interface_d_b_manager.html">DBManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>database</b></td></tr>
<tr class="separator:aea31c73a0a3e36095f04688a9b51b594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a984d4293c7de824df8ab8b7a8510c15e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a984d4293c7de824df8ab8b7a8510c15e"></a>
NSInteger&#160;</td><td class="memItemRight" valign="bottom"><b>patientID</b></td></tr>
<tr class="separator:a984d4293c7de824df8ab8b7a8510c15e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf642f7f159dedf3f805ae62f86f0ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1cf642f7f159dedf3f805ae62f86f0ee"></a>
<a class="el" href="interface_local_d_b_result.html">LocalDBResult</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>currentRow</b></td></tr>
<tr class="separator:a1cf642f7f159dedf3f805ae62f86f0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6956166be867026a4ed5c9552c2fbc85"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6956166be867026a4ed5c9552c2fbc85"></a>
NSMutableData *&#160;</td><td class="memItemRight" valign="bottom"><b>_serverResponseData</b></td></tr>
<tr class="separator:a6956166be867026a4ed5c9552c2fbc85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea06d1743882f6b59247e590cdd0513f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea06d1743882f6b59247e590cdd0513f"></a>
NSInteger&#160;</td><td class="memItemRight" valign="bottom"><b>failedAttempts</b></td></tr>
<tr class="separator:aea06d1743882f6b59247e590cdd0513f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3cb931f4c5147c3595679f241a0bf48"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3cb931f4c5147c3595679f241a0bf48"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>remoteUnreachable</b></td></tr>
<tr class="separator:ad3cb931f4c5147c3595679f241a0bf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a744cbe8cedf02655ce5a2311957059cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithDatabase: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_d_b_manager.html">DBManager</a>*)&#160;</td>
          <td class="paramname"><em>datastore</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method creates an instance using the database manager that is passed to it. This is the preferred method. If no database is given it will attempt to to open the database and assign it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">datastore</td><td>The database manager that is to be the source of data to send to the server.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An instance of the remote server manager. </dd></dl>

</div>
</div>
<a class="anchor" id="a517a86ad693e383d664972123808b9fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) pushDataToRemoteServer </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is the wrapper method for the class. It checks to see if the remote is still reachable and that there is something to send to the server. If the server has been unreachable it ends. If the server is reachable and the database is empty it ends, otherwise it continues going through the database and pushing. </p>

</div>
</div>
<a class="anchor" id="a87140c7af270366183486e2f02dc6f5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeCurrentRowInLocalDB </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method removes the current row from the database. It is called after a successful push to the remote server. For our purposes, the local database essentially functions as a queue with an additional save state. In case of application crash or phone crash, etc the data is not lost and seemed easier to implement than a persistent data store. </p>

</div>
</div>
<a class="anchor" id="aa7263ee167de6993f3c68d74f34d3b9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) sendRowToServer </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is the workhorse of the class. It retrieves the first first row from the database. Then it creates a URL based on the data it retrieved. Then it makes a URL request to the server. After that the NSURLConnection delete methods handle the calls and continue the loop. </p>

</div>
</div>
<a class="anchor" id="a56943f27947c97c9c0d88bf3f89a73f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) URLEncodedString: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>utfString</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is probably a bad hack. This method is used to encode the string into a URL suitable for the server. It does not escape the ? = &amp; _ - / symbols. It has been put into place because the default apple method for url encoding a string with encoding does not encode :'s. Unfortunately the datetime response from the local database includes colons. Using the search and replace method appears to has some undefined behavior and places extra escape sequences where none are wanted or needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">utfString</td><td>The incoming string that will be utf8 encoded and then converted to a URL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A NSString that is a new URL with % encoding. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/douglas/Documents/software/Senior Project/ios/Medical Cyborgs/Medical Cyborgs/<a class="el" href="_remote_d_b_connection_manager_8h_source.html">RemoteDBConnectionManager.h</a></li>
<li>/Users/douglas/Documents/software/Senior Project/ios/Medical Cyborgs/Medical Cyborgs/RemoteDBConnectionManager.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 18 2014 18:18:03 for Medical Cyborgs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
